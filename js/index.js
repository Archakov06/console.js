!function(){"use strict";var r=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},i=function(){function e(){s(this,e)}return t(e,[{key:"render",value:function(){return r(this.template)}},{key:"bind",value:function(){}},{key:"template",get:function(){}},{key:"el",get:function(){return this._el||(this._el=this.render(),this.bind(this._el)),this._el}}]),e}(),o="log",d="dir",y="preview",g="prop",v="error",p="item-head",c="item_pointer",h="item-head_show",_="entry-container_braced",f="entry-container_oversize",k="item-head-info",E="item-head-elements",b="item-head-elements_show",w="item-content-container",u="item-content-container_show",m="item-head-elements-length",C="item-head-elements-length_show",S=function(e){function a(e,t){var n=e.val,i=e.mode;s(this,a);var r=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return r._value=n,r._mode=i,r._consoleExemplar=t,r._isOpened=!1,r}return n(a,i),t(a,[{key:"_getHeadErrorContent",value:function(){return{elOrStr:this._value.toString(),isShowConstructor:!1,isShowElements:!0}}},{key:"_toggleContent",value:function(){this._proxiedContentEl||(this._proxiedContentEl=r('<div class="console__item item-content"></div>'),this._proxiedContentEl.appendChild(this.createContent(this.value,!1).fragment),this._contentContainerEl.appendChild(this._proxiedContentEl)),this._contentContainerEl.classList.toggle(u)}},{key:"_hideContent",value:function(){this._proxiedContentEl.style.display="none"}},{key:"_additionHeadClickHandler",value:function(){}},{key:"_setHeadClickHandler",value:function(e){var t=this;this._setCursorPointer(),e.addEventListener("click",function(e){e.preventDefault(),t._toggleContent(),t._additionHeadClickHandler()})}},{key:"_setCursorPointer",value:function(){this.el.classList.add(c)}},{key:"value",get:function(){return this._value}},{key:"mode",get:function(){return this._mode}}],[{key:"createEntryEl",value:function(e,t,n){var i=r('<span class="entry-container__entry">  '+(n?"":'<span class="entry-container__key">'+e+"</span>")+'<span class="entry-container__value-container"></span></span>');return i.querySelector(".entry-container__value-container").appendChild(t),i}}]),a}(),O=function(e){function m(e,t){var n=e.val,i=e.mode;s(this,m);var r=l(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,{val:n,mode:i},t));return r._entries=new Map,r._isOpened=!1,r}return n(m,S),t(m,[{key:"bind",value:function(){var e=this.el.querySelector("."+p),t=e.querySelector("."+E),n=e.querySelector("."+k);this._contentContainerEl=this.el.querySelector("."+w);var i=this._getHeadContent(),r=i.elOrStr,a=i.isShowConstructor,o=i.isShowElements,s=i.isBraced,l=i.isOpeningDisabled,c=i.isOversize,u=i.isStringified;s&&t.classList.add(_),c&&t.classList.add(f),a&&n.classList.add(h),o&&(r instanceof HTMLElement||r instanceof DocumentFragment?t.appendChild(r):t.innerHTML=r,t.classList.add(b)),this._mode===v&&u&&this.el.classList.add(this._mode),this._mode!==y&&(l||this._setHeadClickHandler(e))}},{key:"_getHeadContent",value:function(){return this._mode===d?this._getHeadDirContent():this._mode===o||this._mode===g||this._mode===v?this._getHeadLogContent():this._mode===y?this._getHeadPreviewContent():""}},{key:"_getHeadPreviewContent",value:function(){return"[object Object]"===Object.prototype.toString.call(this.value)?{elOrStr:"...",isShowConstructor:!1,isShowElements:!0,isBraced:!0}:this._getHeadDirContent()}},{key:"_getHeadLogContent",value:function(){var e=void 0,t=!1,n=!0,i=!1,r=!1,a=!1;if(this.value instanceof HTMLElement)return this._getHeadDirContent();if(this.value instanceof Error)n=!1,e=this.value.toString(),a=!0;else if(this.value instanceof Number){e=this._consoleExemplar.createTypedView(Number.parseInt(this.value,10),y).el,t=!0}else if(this.value instanceof String){e=this._consoleExemplar.createTypedView(this.value.toString(),y).el,t=!0}else if(this.value instanceof Date)e=this.value.toString(),a=!0,n=!1;else if(this.value instanceof RegExp)e="/"+this.value.source+"/"+this.value.flags,i=!0,n=!1;else{var o=this.createContent(this.value,!0);e=o.fragment,r=o.isOversize,this.value.constructor!==Object&&(t=!0)}return{elOrStr:e,isShowConstructor:t,isShowElements:!0,isBraced:n,isOpeningDisabled:i,isOversize:r,isStringified:a}}},{key:"_getHeadDirContent",value:function(){var e=void 0,t=!1,n=!0;if(this.value instanceof HTMLElement){var i=this.value.tagName.toLowerCase();i+=this.value.id,this.value.classList.length&&(i+="."+Array.prototype.join.call(this.value.classList,".")),e=i}else this.value instanceof Date?e=this.value.toString():this.value instanceof RegExp?e="/"+this.value.source+"/"+this.value.flags:this.value instanceof Error?e=this.value.toString():(e=this.value,t=!0,n=!1);return{elOrStr:e,isShowConstructor:t,isShowElements:n,isBraced:!1}}},{key:"createContent",value:function(e,t){var n=document.createDocumentFragment(),i=new Set;for(var r in e){if(i.add(r),t&&5===i.size)return{fragment:n,isOversize:!0};var a=e[r],o=this._consoleExemplar.createTypedView(a,t?y:g),s=m.createEntryEl(r,o.el);n.appendChild(s)}var l=!0,c=!1,u=void 0;try{for(var h,d=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var v=h.value;if(!i.has(v)){if(i.add(v),t&&5===i.size)return{fragment:n,isOversize:!0};var p=e[v],_=this._consoleExemplar.createTypedView(p,t?y:g),f=m.createEntryEl(v,_.el);n.appendChild(f)}}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}return{fragment:n,isOversize:!1}}},{key:"template",get:function(){return'<div class="console__item item item_object">  <div class="'+p+'">\n    <span class="'+k+'">'+this.value.constructor.name+'</span>\n    <div class="'+E+' entry-container entry-container_head entry-container_type_object"></div>\n  </div>\n  <div class="'+w+' entry-container entry-container_type_object"></div>\n</div>'}}]),m}(),H=function(e){function f(e,t){var n=e.val,i=e.mode;s(this,f);var r=l(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,{val:n,mode:i},t));return r._elements=new Map,r._isOpened=!1,r}return n(f,S),t(f,[{key:"bind",value:function(){this._contentContainerEl=this.el.querySelector("."+w),this.headEl=this.el.querySelector("."+p),this.headInfoEl=this.headEl.querySelector("."+k),this.headElementsEl=this.headEl.querySelector("."+E),this.headElementsLengthEl=this.headEl.querySelector("."+m);var e=this._getHeadContent(),t=e.isShowConstructor,n=e.isShowElements,i=e.isShowLength;t&&this._toggleConstructor(this.headInfoEl,!0),n&&(this.headElementsEl.appendChild(this.createContent(this.value,!0).fragment),this._toggleHeadElements(this.headElementsEl,!0)),i&&this._toggleLength(this.headElementsLengthEl,!0),this._mode!==y&&this._setHeadClickHandler(this.headEl)}},{key:"_additionHeadClickHandler",value:function(){this._mode===g&&(this._toggleConstructor(),this._toggleHeadElements())}},{key:"_toggleConstructor",value:function(){this.headInfoEl.classList.toggle(h)}},{key:"_toggleLength",value:function(){this.headElementsLengthEl.classList.toggle(C)}},{key:"_toggleHeadElements",value:function(){this.headElementsEl.classList.toggle(b)}},{key:"_getHeadContent",value:function(){var e=!1,t=!0,n=1<this.value.length;if(this._mode===d)e=!0,t=!1;else if(this._mode===y)t=!1,n=e=!0;else if(this._mode===v)return this._getHeadErrorContent();return{isShowConstructor:e,isShowElements:t,isShowLength:n}}},{key:"createContent",value:function(e,t){var n=Object.getOwnPropertyNames(e),i=Object.keys(e),r=document.createDocumentFragment(),a=!0,o=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h=e[u],d=i.indexOf(u),v=Number.isNaN(Number.parseInt(u,10));if(!t||-1!==d){var p=this._consoleExemplar.createTypedView(h,t?y:g),_=f.createEntryEl(u,p.el,t?!v:t);r.appendChild(_)}}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}return{fragment:r}}},{key:"template",get:function(){return'<div class="console__item item item_array">\n  <div class="'+p+'">\n    <span class="'+k+'">'+this.value.constructor.name+'</span>\n    <span class="'+m+'">'+this.value.length+'</span>\n    <div class="'+E+' entry-container entry-container_head entry-container_braced entry-container_type_array"></div>\n  </div>\n  <div class="'+w+' entry-container entry-container_type_array"></div>\n</div>'}}]),f}(),x="plain",L="arrow",T="class",j=function(e){function h(e,t){var n=e.val,i=e.mode;s(this,h);var r=l(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,{val:n,mode:i},t));return r._mode=i,r._isOpened=!1,r._fnType=h.checkFnType(n),r}return n(h,S),t(h,[{key:"bind",value:function(){if(this._mode===d||this._mode===g){this._contentContainerEl=this.el.querySelector("."+w);var e=this.el.querySelector("."+p);this._setHeadClickHandler(e)}}},{key:"_getHeadPropMarkup",value:function(){var e=this.parseFunction(this.value),t=e.name,n=e.params,i=e.lines.join("\n"),r="<span>"+(this._fnType===T?"class ":"")+(this._fnType===x?"f ":"")+(t||"")+(this._fnType!==T?"("+n.join(", ")+")":"")+(this._fnType===L?" => ":" ");return this._fnType!==T&&(r+="{"+(i.length<=43?i:"...")+"}"),r+="</span>"}},{key:"_getHeadDirMarkup",value:function(){var e=this.parseFunction(this.value),t=e.name,n=e.params;return"  <span>  "+(this._fnType===T?"class ":"")+"  "+(this._fnType===x?"f ":"")+"  "+(t||"")+"  "+(this._fnType!==T?"("+n.join(", ")+")":"")+"</span>"}},{key:"_getLogMarkup",value:function(){return"<pre>"+this.value.toString()+"</pre>"}},{key:"parseParams",value:function(e){var t=e.indexOf("("),n=e.indexOf(")"),i=e.substring(t+1,n).trim();return i?i.split(",").map(function(e){return e.trim()}):[]}},{key:"parseName",value:function(e){var t=void 0;this._fnType===T?t="{":this._fnType===x&&(t="(");var n=void 0,i=new RegExp("(?:class|function)\\s+(\\w+)\\s*(?:\\"+t+")").exec(e);return null!==i&&(n=i[1]),n}},{key:"parseBody",value:function(e){var t=e.indexOf("{"),n=e.lastIndexOf("}"),i=e.substring(t+1,n).trim();return i?i.split("\n").map(function(e){return e.trim()}):[]}},{key:"parseFunction",value:function(e){var t=void 0;return"string"!=typeof e&&(t=e.toString()),{name:e.name,params:this.parseParams(t),lines:this.parseBody(t)}}},{key:"createContent",value:function(e){var t=document.createDocumentFragment(),n=!0,i=!1,r=void 0;try{for(var a,o=["name","prototype","caller","arguments","length","__proto__"][Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=void 0;try{l=e[s]}catch(e){continue}var c=this._consoleExemplar.createTypedView(l,d),u=h.createEntryEl(s,c.el);t.appendChild(u)}}catch(e){i=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return{fragment:t}}},{key:"template",get:function(){var e='<div class="console__item item item_function '+(this._mode===v?""+this._mode:"")+'">';switch(this._mode){case y:e+="f";break;case g:e+='<div class="'+p+'">'+this._getHeadPropMarkup()+'</div><div class="'+w+' entry-container"></div>';break;case d:e+='<div class="'+p+'">'+this._getHeadDirMarkup()+'</div><div class="'+w+' entry-container"></div>';break;case o:case v:e+=this._getLogMarkup()}return e+="</div>"}}],[{key:"checkFnType",value:function(e){var t=e.toString(),n=t.indexOf("("),i=t.indexOf("class"),r=t.indexOf("=>");return-1!==i&&i<n?T:-1!==r&&n<r?L:x}}]),h}(),D="string_collapsed",P=function(e){function o(e,t){var n=e.val,i=e.mode,r=e.type;s(this,o);var a=l(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,{val:n,mode:i},t));return a._type=r,a}return n(o,S),t(o,[{key:"bind",value:function(){var t=this;this.mode===g&&"string"===this.type&&(this._setCursorPointer(),this.el.addEventListener("click",function(e){e.preventDefault(),t.el.classList.toggle(D)}))}},{key:"escapeHtml",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"template",get:function(){var e=this._type,t=this.value,n="";switch("string"!==e&&"symbol"!==e||("symbol"===e&&(t=t.toString()),t=this.escapeHtml(t)),e){case"undefined":case"null":case"boolean":n='<div class="console__item item item_primitive '+e+'">'+t+"</div>";break;case"number":n=Number.isNaN(t)?'<div class="console__item item item_primitive NaN">NaN</div>':t===1/0||t===-1/0?'<div class="console__item item item_primitive number">'+(t===-1/0?"-":"")+"Infinity</div>":'<div class="console__item item item_primitive '+e+'">'+t+"</div>";break;case"string":n='<pre class="console__item item item_primitive string '+(this.mode===g?D:"")+" "+(this.mode===v?""+this.mode:"")+'">'+t+"</pre>";break;case"symbol":n='<div class="console__item item item_primitive symbol">'+t+"</div>";break;case"object":if(null===t){n='<div class="console__item item item_primitive null">'+t+"</div>";break}}return n}}]),o}(),e=function(){function n(e,t){if(s(this,n),!e)throw new Error("Console is not inited!");this._container=e,t&&"number"==typeof t.expandFields&&"number"==typeof t.expandDepth&&(this._expandFields=t.expandFields,this._expandDepth=t.expandDepth)}return t(n,[{key:"onlog",value:function(){}},{key:"ondir",value:function(){}},{key:"onerror",value:function(){}},{key:"log",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._container.appendChild(this._getRowEl(t,o)),this.onlog()}},{key:"error",value:function(e){var t=r('<div class="console__row console__row_error"></div>');t.appendChild(this.createTypedView(e,v).el),this._container.appendChild(t),this.onerror()}},{key:"dir",value:function(e){var t=r('<div class="console__row"></div>');t.appendChild(this.createTypedView(e,d).el),this._container.appendChild(t),this.ondir()}},{key:"clean",value:function(){this._container.innerHTML=""}},{key:"createTypedView",value:function(e,t){var n={val:e,mode:t,type:void 0===e?"undefined":a(e)},i=void 0;switch(n.type){case"function":i=new j(n,this);break;case"object":i=null!==e?Array.isArray(e)?new H(n,this):new O(n,this):new P(n,this);break;default:i=new P(n,this)}return i}},{key:"_getRowEl",value:function(e,t){var n=this,i=r('<div class="console__row"></div>');return e.forEach(function(e){i.appendChild(n.createTypedView(e,t).el)}),i}},{key:"sourceLog",get:function(){return this._container.innerHTML}}],[{key:"extend",value:function(e){return e.log=this.log,e.info=this.log,e.error=this.error,e.warn=this.error,e.dir=this.dir,e}}]),n}();window.jsConsole=new e(document.querySelector(".console"))}();
//# sourceMappingURL=index.js.map
