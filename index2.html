<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>js-console example</title>
    <link href="css/style.css" rel="stylesheet">
  </head>
  <body>
    <div class="console"></div>
    <script src="js/index.js"></script>

    <script>
      jsConsole.log(undefined);

      jsConsole.log(NaN);

      jsConsole.log(null);

      jsConsole.log(true);

      jsConsole.log(100);

      jsConsole.log(Infinity);

      jsConsole.log(-Infinity);

      jsConsole.log('Here is console log');

      jsConsole.log(`Here is console log
        sdadsda
asddsd`);

      jsConsole.log("current year: ", (new Date()).getFullYear());

      jsConsole.log([
        {key1: 'value1'},
        {key2: 'value2'}
      ]);

      jsConsole.dir(undefined);

      jsConsole.dir(NaN);

      jsConsole.dir(null);

      jsConsole.dir(true);

      jsConsole.dir(100);

      jsConsole.dir(Infinity);

      jsConsole.dir(-Infinity);

      jsConsole.dir('Here is console log');

      jsConsole.dir(`Here is console log
        sdadsda
asddsd`);

      jsConsole.dir("current year: ", (new Date()).getFullYear());

      jsConsole.dir([
        {key1: 'value1'},
        {key2: 'value2'}
      ]);

      var a = {};
      a.b = {a: a};
      jsConsole.log(a);
      jsConsole.dir(a);

      var s1 = {a:1, b:'', d: [1, 2, "", [1, 2, ""]], n: function (test = 123, bar) {return test;}, e: {b:1}};
      jsConsole.log(s1, [1,2,3]);
      jsConsole.dir(s1, [1,2,3]);

      var arr = [1, 2, 3];
      arr.test = 123;
      jsConsole.log(arr);
      jsConsole.dir(arr);

      class Person {
        constructor(val) {
          this._bar = val;
          if (val === 123) {
            this._bar = val;
              }
        }
        get [Symbol.species]() { this.constructor = Array; }
      }

      class bar {
        constructor(va) {
          console.log(va)
        }
      }

      const fn = (bar = 123) => {console.log(456); return 123;};
      const fn1 = (bar = 123) => {'sssssssssssssssssssssssssssssssssssssssss'};
      const fn2 = (bar = 123) => {'sssssssssssssssssssssssssssssssssssssssssss'};
      function test (bar456 = 123) {console.log(456); return 123;}
      const test1 = function (bar1 = 123) {console.log(456); return 123;}
      const test2 = function named (bar2 = 123) {console.log(456); return 123;}
      const s2 = { Person, bar, fn, fn1, fn2, test, test1, test2};

      jsConsole.dir(Person);
      jsConsole.dir(bar);
      jsConsole.dir(fn);
      jsConsole.dir(fn1);
      jsConsole.dir(fn2);
      jsConsole.dir(test);
      jsConsole.dir(test1);
      jsConsole.dir(test2);
      jsConsole.dir(s2);
      jsConsole.dir(new Number(1));
console.dir(Person)
console.dir(bar)
console.dir(fn)
console.dir(fn1)
console.dir(fn2)
console.dir(test)
console.dir(test1)
console.dir(test2)
console.dir(s2)
console.dir(new Number(1))
      jsConsole.log(Person);
      jsConsole.log(bar);
      jsConsole.log(fn);
      jsConsole.log(fn1);
      jsConsole.log(fn2);
      jsConsole.log(test);
      jsConsole.log(test1);
      jsConsole.log(test2);
      jsConsole.log(s2);
      jsConsole.log(new Number(1));
console.log(Person)
console.log(bar)
console.log(fn)
console.log(fn1)
console.log(fn2)
console.log(test)
console.log(test1)
console.log(test2)
console.log(s2)
console.log(new Number(1))

      var num = new Number(123);
      var str = new String('qwe');
      var s3 = {num, str};
      jsConsole.log(s3);
      jsConsole.dir(s3);

      var div = document.querySelector('div');
      jsConsole.log(div);
      jsConsole.dir(div);
      console.log(div)
      console.dir(div)

      jsConsole.log(function () {
        var testVariable = 'method code';
      });


      jsConsole.log([1, function () {
        var testVariable = 'method code';
      }]);

      jsConsole.log({
        method: function () {
          var testVariable = 'method code';
        }
      });

      jsConsole.log({
        cat: {
          name: 'Сергей Сергеевич',
          kittens: [{
            name: 'Иван Васильич',
            kittens: [
              {name: 'Пётр Иванович'}
            ]
          }]
        }
      });

      class Cat {
        constructor(name, age = 0, male = true) {
        this.name = name;
        this.age = age;
        this.male = male;
        }

        eat(food) {
        console.log(`${this.name} ate ${food}`);
        }

        meow() {
        return `Мяу!`;
        }
      }

      jsConsole.log(new Cat(`Кекс`));
      jsConsole.log(new Cat(`Кекс`, 7));
      jsConsole.log(new Cat(`Кексинка`, 4, true));

      // jsConsole.error('Ошибка!');
      var err = new TypeError('LOLOLO');
      jsConsole.error(err);
      jsConsole.log(err);
      jsConsole.dir(err);

      jsConsole.error(123)

      // throw new TypeError('test');

      jsConsole.log([[1,2,3],[1,2,3]]);

      class UserModel {
        constructor(data) {
          this.listeners = new Set();
          this.data = data;
        }

        subscribe(listener) {
          this.listeners.add(listener);
        }

        notifyAll() {
          for (const listener of this.listeners) {
            listener(this);
          }
        }

        get name() {
          return this.data.name;
        }

        set name(name) {
          this.data.name = name;
          this.notifyAll();
        }

        get familyName() {
          return this.data.familyName;
        }
      }

      class UserView {
        constructor(binder) {
          this.binder = binder;
        }

        get template() {
          return `
      <div>
        <span>Name:</span><span>\${user.name}</span> <span>\${user.familyName}</span>
      </div>
      <div>
        <label>Name:<input value="\${user.name}"></label>
      </div>
      `;
        }

        get element() {
          if (!this._el) {
            this._el = this.binder.compile(this.template);
          }
          return this._el;
        }
      }

      window.addEventListener(`error`, (err) => {
        console.dir(err)
        jsConsole.error(err.error);
      });
      class ViewModel {
        constructor() {
          this.binder = new window.mvvm.Binder();
          this.model = new UserModel({
            name: `Luigi`,
            familyName: `Mario`
          });
        }

        init() {
          this.view = new UserView(this.binder);
          const element = this.view.element;
          const userModel = this.model;
          this.binder.bind({
            user: {
              get name() {
                return userModel.name;
              },

              set name(newName) {
                console.log(newName);
                userModel.name = newName;
              },

              familyName: userModel.familyName
            }
          });
          const body = document.body;
          body.insertBefore(element, body.children[0]);
        }
      }

      const viewModel = new ViewModel();
        viewModel.init();

    </script>
  </body>
</html>
